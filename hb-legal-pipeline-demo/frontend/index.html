<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HB Legal AI Pipeline Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">HB Legal AI Pipeline</h1>
                <div class="header-stats">
                    <div class="stat-badge">
                        <span class="stat-label">System Status</span>
                        <span class="stat-value status-indicator" id="system-status">
                            <span class="pulse-dot"></span>
                            Active
                        </span>
                    </div>
                    <div class="stat-badge">
                        <span class="stat-label">Uptime</span>
                        <span class="stat-value" id="uptime">99.9%</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- ROI Metrics Card -->
            <div class="card glass-card roi-metrics">
                <div class="card-header">
                    <h2>ROI Metrics</h2>
                    <span class="refresh-indicator" id="roi-refresh">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                        </svg>
                    </span>
                </div>
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value">
                            $<span id="cost-savings" class="counter">0</span>K
                        </div>
                        <div class="metric-label">Monthly Savings</div>
                        <div class="metric-change positive">+12.5%</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">
                            <span id="time-saved" class="counter">0</span>hrs
                        </div>
                        <div class="metric-label">Time Saved</div>
                        <div class="metric-change positive">+24%</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">
                            <span id="accuracy-rate" class="counter">0</span>%
                        </div>
                        <div class="metric-label">Accuracy Rate</div>
                        <div class="metric-change positive">+3.2%</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">
                            <span id="docs-processed" class="counter">0</span>
                        </div>
                        <div class="metric-label">Docs Processed</div>
                        <div class="metric-change positive">+156</div>
                    </div>
                </div>
            </div>

            <!-- Workflow Status -->
            <div class="card glass-card workflow-status">
                <div class="card-header">
                    <h2>Active Workflows</h2>
                    <span class="badge" id="workflow-count">0 Running</span>
                </div>
                <div class="workflow-list" id="workflow-list">
                    <!-- Workflows will be dynamically added here -->
                </div>
            </div>

            <!-- Prompt Performance -->
            <div class="card glass-card prompt-performance">
                <div class="card-header">
                    <h2>Top Performing Prompts</h2>
                    <button class="btn-secondary" onclick="refreshPrompts()">Refresh</button>
                </div>
                <div class="prompt-list" id="prompt-list">
                    <!-- Prompts will be dynamically added here -->
                </div>
            </div>

            <!-- Model Performance Chart -->
            <div class="card glass-card model-performance">
                <div class="card-header">
                    <h2>Model Performance</h2>
                </div>
                <div class="chart-container">
                    <canvas id="performance-chart"></canvas>
                </div>
                <div class="model-stats" id="model-stats">
                    <!-- Model stats will be added here -->
                </div>
            </div>

            <!-- Activity Feed -->
            <div class="card glass-card activity-feed">
                <div class="card-header">
                    <h2>Recent Activity</h2>
                    <span class="live-indicator">
                        <span class="live-dot"></span>
                        Live
                    </span>
                </div>
                <div class="activity-list" id="activity-list">
                    <!-- Activities will be dynamically added here -->
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card glass-card quick-actions">
                <div class="card-header">
                    <h2>Quick Actions</h2>
                </div>
                <div class="actions-grid">
                    <button class="action-btn" onclick="openPromptLibrary()">
                        <svg class="action-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                        <span>Prompt Library</span>
                    </button>
                    <button class="action-btn" onclick="startNewWorkflow()">
                        <svg class="action-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <polygon points="10 8 16 12 10 16 10 8"/>
                        </svg>
                        <span>New Workflow</span>
                    </button>
                    <button class="action-btn" onclick="viewAnalytics()">
                        <svg class="action-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <line x1="18" y1="20" x2="18" y2="10"/>
                            <line x1="12" y1="20" x2="12" y2="4"/>
                            <line x1="6" y1="20" x2="6" y2="14"/>
                        </svg>
                        <span>Analytics</span>
                    </button>
                    <button class="action-btn" onclick="openSettings()">
                        <svg class="action-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6m4.22-13.22l4.24 4.24M1.54 1.54l4.24 4.24M19.46 19.46l4.24 4.24M1.54 19.46l4.24-4.24"/>
                        </svg>
                        <span>Settings</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-label">MCP Server:</span>
                <span class="status-value" id="mcp-status">Connected</span>
            </div>
            <div class="status-item">
                <span class="status-label">n8n Status:</span>
                <span class="status-value" id="n8n-status">Active</span>
            </div>
            <div class="status-item">
                <span class="status-label">Last Update:</span>
                <span class="status-value" id="last-update">Just now</span>
            </div>
            <div class="status-item">
                <span class="status-label">API Latency:</span>
                <span class="status-value" id="api-latency">12ms</span>
            </div>
        </div>
    </div>

    <!-- Modal for Prompt Library -->
    <div id="prompt-modal" class="modal">
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2>Prompt Library</h2>
                <button class="close-btn" onclick="closeModal('prompt-modal')">&times;</button>
            </div>
            <div class="modal-body" id="prompt-modal-content">
                <!-- Prompt details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>